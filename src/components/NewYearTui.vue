<template>
    <div ref="viewport" class="tui">
        <!-- è®¾è®¡ç”»å¸ƒï¼šå›ºå®šå°ºå¯¸ï¼Œç”¨ç¼©æ”¾é€‚é…çª—å£å¤§å°ï¼Œä¿è¯å¸ƒå±€æ¯”ä¾‹ç¨³å®š -->
        <div class="stage" :class="{ mobile: isMobile }" :style="stageStyle">
            <div class="title-block">
                <div class="pixel-title">HAPPY CODE YEAR</div>
            </div>

            <div class="slogan">
                <span class="horse">ğŸ´</span>
                <span class="slogan-text" v-if="!isMobile">ç  å¹´ å¤§ å‰ ãƒ» ä¸™ åˆ å¹´ ãƒ» ä¸‡ ç  å¥” è…¾</span>
                <span class="slogan-text" v-else>ç  å¹´ å¤§ å‰<br>ä¸™ åˆ å¹´<br>ä¸‡ ç  å¥” è…¾</span>
                <span class="horse">ğŸ´</span>
            </div>

            <div class="intro">
                <div class="invader">
                    <InvaderIcon :size="70" />
                </div>
                <div class="intro-text">
                    <div>Welcome to ä¸™åˆé©¬å¹´ v2026.2.17</div>
                    <div>
                        cwd:
                        <span class="teal">~/2026/todo</span>
                    </div>
                    <div>
                        model:
                        <span class="teal">claude-opus-4.6</span>
                        <span class="muted">ï¼ˆç åŠ›å…¨å¼€ç‰ˆï¼‰</span>
                    </div>
                    <div>
                        Tip:
                        <span class="tip">æ–°çš„ä¸€å¹´å¤šå­¦ä¹ ï¼Œä¹Ÿè¦å¤šä¼‘æ¯</span>
                    </div>
                </div>
            </div>

            <div class="panels">
                <!-- Plan -->
                <div class="panel">
                    <div class="panel-header">
                        <span class="panel-header-text">Plan</span>
                    </div>

                    <div class="panel-body">
                        <div class="panel-top">
                            <div>2026 å¹´åº¦æ„¿æœ›æ¸…å•ç¡®è®¤</div>
                            <div>è¯·ç¡®è®¤ä½ çš„æ–°å¹´éœ€æ±‚:</div>
                        </div>

                        <div class="section">
                            <div class="section-title">â—† ä»Šå¹´ç”Ÿæ´»ä¸Šè¦:</div>

                            <div class="row">
                                <span class="cb"></span><span class="cn">èº«ä½“å¥åº·</span><span class="dash">â€”</span>
                                <span class="mono">uptime: 365d, 0 crashes, 0 hotfixes</span>
                            </div>
                            <div class="row">
                                <span class="cb"></span><span class="cn">è´¢è¿äº¨é€š</span><span class="dash">â€”</span>
                                <span class="mono">bonus = int('overflow')</span>
                            </div>
                            <div class="row">
                                <span class="cb"></span><span class="cn">æ— å¿§æ— è™‘</span><span class="dash">â€”</span>
                                <span class="mono">rm -rf ~/anxiety ~/stress ~/self-doubt</span>
                            </div>
                            <div class="row">
                                <span class="cb"></span><span class="cn">è¾¾æˆç›®æ ‡</span><span class="dash">â€”</span>
                                <span class="mono">assert all(goal.done for goal in y2026)</span>
                            </div>
                        </div>

                        <div class="section">
                            <div class="section-title">â—† ä»Šå¹´å­¦ä¸šä¸Šè¦:</div>

                            <div class="row">
                                <span class="cb"></span><span class="cn">ä¸€æ¬¡ä¸Šå²¸</span><span class="dash">â€”</span>
                                <span class="mono">offer = recruit.accept(top_choice)</span>
                            </div>
                            <div class="row">
                                <span class="cb"></span><span class="cn">è¿å‘Paper</span><span class="dash">â€”</span>
                                <span class="mono">papers.append(CCF_A)</span>
                            </div>
                            <div class="row">
                                <span class="cb"></span><span class="cn">æ¯ä¸ªideaéƒ½work</span><span class="dash">â€”</span>
                                <span class="mono">for idea in brain: pass</span>
                            </div>
                            <div class="row">
                                <span class="cb"></span><span class="cn">æ˜¾å¡è‡ªç”±</span><span class="dash">â€”</span>
                                <span class="mono">gpu_cluster = [H200] * 128</span>
                            </div>
                            <div class="row">
                                <span class="cb"></span><span class="cn">ç»è´¹å……è¶³</span><span class="dash">â€”</span>
                                <span class="mono">grant.balance = Decimal('Infinity')</span>
                            </div>
                        </div>

                        <div class="section">
                            <div class="section-title">â—† ä»Šå¹´å·¥ä½œä¸Šè¦:</div>

                            <div class="row">
                                <span class="cb"></span><span class="cn">å‡èŒåŠ è–ª</span><span class="dash">â€”</span>
                                <span class="mono">salary += salary * 0.5</span>
                            </div>
                            <div class="row">
                                <span class="cb"></span><span class="cn">éœ€æ±‚ä¸å˜æ›´</span><span class="dash">â€”</span>
                                <span class="mono">git revert product_manager --hard</span>
                            </div>
                            <div class="row">
                                <span class="cb"></span><span class="cn">å‡†æ—¶ä¸‹ç­</span><span class="dash">â€”</span>
                                <span class="mono">crontab -e # 18:00 /usr/bin/go-home</span>
                            </div>
                            <div class="row">
                                <span class="cb"></span><span class="cn">Vibe Coding ä¸€æ¬¡è¿‡</span><span class="dash">â€”</span>
                                <span class="mono">cursor.run(prompt) == LGTM</span>
                            </div>
                            <div class="row">
                                <span class="cb"></span><span class="cn">é…ç¯å¢ƒä¸æŠ¥é”™</span><span class="dash">â€”</span>
                                <span class="mono">pip install . && exit 0 # ä¸€æ¬¡æå®š</span>
                            </div>
                        </div>

                        <div class="divider"></div>

                        <div class="prompt">
                            <div><span class="gt">&gt;</span> ä½ çš„é€‰æ‹©: <span class="pick">æˆ‘å…¨éƒ½è¦!</span></div>
                            <div><span class="ok">âœ“</span> å·²ç¡®è®¤ï¼Œæ­£åœ¨éƒ¨ç½²åˆ° <span class="ok-strong">2026</span>...</div>
                        </div>
                    </div>
                </div>

                <!-- Execution -->
                <div class="panel">
                    <div class="panel-header">
                        <span class="panel-header-text">Execution</span>
                    </div>

                    <div class="panel-body">
                        <div class="mono block">
                            <div>diff --git a/2025.life b/2026.life</div>
                            <div>--- a/2025.life</div>
                            <div>+++ b/2026.life</div>
                            <div class="amber">@@ -1,8 +1,8 @@</div>
                        </div>

                        <div class="block">
                            <div class="chg minus">- ä¹…åä¸åŠ¨ï¼Œç†¬å¤œé€šå®µ</div>
                            <div class="chg plus">+ è§„å¾‹ä½œæ¯ï¼Œç²¾åŠ›å……æ²›</div>

                            <div class="chg minus">- è®ºæ–‡è¢«æ‹’ï¼Œå¯¼å¸ˆå·²è¯»ä¸å›</div>
                            <div class="chg plus">+ ä¸­å¥–é¡¶ä¼šï¼Œå¯¼å¸ˆç–¯ç‹‚ç‚¹èµ</div>

                            <div class="chg minus">- é…ç¯å¢ƒä¸‰å¤©ï¼Œè·‘ä»£ç ä¸‰åˆ†é’Ÿ</div>
                            <div class="chg plus">+ ä¸€é”®éƒ¨ç½²ï¼Œå¼€ç®±å³ç”¨</div>

                            <div class="chg minus">- æ˜¾å¡æ’é˜Ÿï¼Œ<span class="tok red">Token</span> ç²¾å°½</div>
                            <div class="chg plus">+ ç®—åŠ›æ— é™ï¼Œ<span class="tok green">Token</span> è‡ªç”±</div>

                            <div class="chg minus">- éœ€æ±‚å˜æ›´ï¼Œé€šå®µåŠ ç­</div>
                            <div class="chg plus">+ å‡†æ—¶ä¸‹ç­ï¼Œéœ€æ±‚å†»ç»“</div>

                            <div class="chg minus">- ç„å­¦ bugï¼Œé‡å¯ä¹Ÿæ²¡ç”¨</div>
                            <div class="chg plus">+ ä»£ç ä¼˜é›…ï¼Œé›¶ <span class="mono">warning</span></div>

                            <div class="chg minus">- ä½™é¢ä¸è¶³ï¼ŒèŠ±å‘—è¿˜æ¬¾</div>
                            <div class="chg plus">+ è´¢åŠ¡è‡ªç”±ï¼Œè¢«åŠ¨æ”¶å…¥</div>

                            <div class="chg minus">- ç„¦è™‘å†…è€—ï¼Œç²¾ç¥ç´§ç»·</div>
                            <div class="chg plus">+ å¿ƒæ€å¹³å’Œï¼Œå¿«ä¹å……å®</div>
                        </div>

                        <div class="mono block">
                            <div class="amber">$ git add .</div>
                            <div class="amber">$ git commit -m "è¾æ—§è¿æ–° 2026"</div>
                            <div>[main 2026] è¾æ—§è¿æ–° 2026</div>
                            <div>&nbsp;&nbsp;8 files changed, 8 insertions(+),</div>
                            <div>&nbsp;&nbsp;8 deletions(-)</div>
                            <div class="amber">$ git push origin main</div>
                            <div class="okline">âœ“ å·²æ¨é€è‡³ <span class="ok-strong">2026</span> ğŸ´</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</template>

<script setup lang="ts">
import { computed, onBeforeUnmount, onMounted, ref } from "vue";
import InvaderIcon from "./InvaderIcon.vue";

const DESIGN_W = 980;
const DESIGN_H = 720;

const viewport = ref<HTMLDivElement | null>(null);
const scale = ref(1);
const isMobile = ref(false);

let ro: ResizeObserver | undefined;

function updateMode() {
    isMobile.value = window.innerWidth < 1280; // åªåˆ†ä¸¤æ¡£
}

function updateScale() {
    if (isMobile.value) {
        // æ‰‹æœºç«¯ä¸æ•´ä½“ç¼©æ”¾ï¼Œäº¤ç»™ CSS åšæ­£å¸¸æµå¼å¸ƒå±€
        scale.value = 1;
        return;
    }
    const el = viewport.value;
    if (!el) return;
    const rect = el.getBoundingClientRect();
    const s = Math.min((rect.width * 0.96) / DESIGN_W, (rect.height * 0.96) / DESIGN_H);
    scale.value = Math.max(0.2, Math.min(2.2, s));
}

onMounted(() => {
    updateMode();
    updateScale();

    ro = new ResizeObserver(() => {
        updateMode();
        updateScale();
    });
    if (viewport.value) ro.observe(viewport.value);

    window.addEventListener("resize", () => {
        updateMode();
        updateScale();
    });
});

onBeforeUnmount(() => {
    ro?.disconnect();
    window.removeEventListener("resize", () => {
        updateMode();
        updateScale();
    });
});

const stageStyle = computed(() => {
    if (isMobile.value) return {}; // å…³é”®ï¼šæ‰‹æœºç«¯ä¸å†å†™ transform/å›ºå®šå®½é«˜å†…è”æ ·å¼
    return {
        width: `${DESIGN_W}px`,
        height: `${DESIGN_H}px`,
        transform: `translate(-50%, -50%) scale(${scale.value})`,
    };
});






</script>

<style scoped>
.tui {
    height: 100%;
    background: #dbd2c1;
    position: relative;
    overflow: hidden;
    font-family: "ZPIX", "FusionPixel", ui-monospace, Menlo, Consolas, monospace;
    color: #3d342b;
}

.stage {
    position: absolute;
    left: 50%;
    top: 50%;
    transform-origin: center;
}

/* æ ‡é¢˜ï¼šç”¨ text-shadow å †å‡ºåƒç´ å å½±æ„Ÿï¼ˆå­—ä½“æ˜¯å…³é”®ï¼‰ */
.title-block {
    text-align: center;
    margin-top: 0px;
}

.pixel-title {
    font-family: "PIXEL_TITLE", "ZPIX", ui-monospace, monospace;
    font-weight: 900;
    letter-spacing: 10px;
    line-height: 0.88;
    font-size: 70px;
    color: #9b5b35;
    text-shadow:
        3px 0 0 #caa987,
        0 3px 0 #caa987,
        3px 3px 0 #caa987,
        6px 6px 0 #b88f6d,
        9px 9px 0 #a67c5b,
        12px 12px 0 #956e50;
}

.slogan {
    margin-top: 10px;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 18px;
    color: #b88f6d;
    font-size: 14px;
}

.slogan-text {
    letter-spacing: 6px;
}

.horse {
    color: #2b241e;
    font-size: 14px;
}

.intro {
    margin-top: 8px;
    display: flex;
    align-items: flex-start;
    gap: 18px;
    padding: 0 46px;
}

.invader {
    width: 86px;
    display: grid;
    place-items: center;
}

.intro-text {
    font-size: 14px;
    line-height: 1.1;
}

.teal {
    color: #3b8d8c;
    font-weight: 700;
}

.muted {
    color: #6e6256;
}

.tip {
    color: #c59664;
    font-weight: 700;
}

/* Panels */
.panels {
    margin-top: 0px;
    padding: 0 34px;
    display: grid;
    grid-template-columns: 2fr 1fr;
    gap: 22px;
}

.panel {
    border: 2px solid #c4b39a;
    border-radius: 10px;
    background: rgba(255, 255, 255, 0.12);
    box-shadow: inset 0 0 0 2px rgba(255, 255, 255, 0.08);
    overflow: hidden;
}

.panel-header {
    position: relative;
    height: 36px;
    display: grid;
    place-items: center;
}

.panel-header::before {
    content: "";
    position: absolute;
    left: 18px;
    right: 18px;
    top: 18px;
    height: 2px;
    background: rgba(61, 52, 43, 0.35);
}

.panel-header-text {
    position: relative;
    padding: 0 12px;
    background: #dbd2c1;
    color: #c59664;
    font-size: 14px;
    font-weight: 900;
    letter-spacing: 2px;
}

.panel-body {
    padding: 0px 12px 10px 32px;
    font-size: 12px;
}

/* Plan å·¦ä¾§æ’ç‰ˆ */
.panel-top {
    margin-bottom: 10px;
    font-size: 14px;
    line-height: 1;
}

.section {
    margin-top: 12px;
}

.section-title {
    color: #c59664;
    font-weight: 900;
    margin-bottom: 6px;
    font-size: 13px;
}

.row {
    display: grid;
    grid-template-columns: 24px 150px 26px 1fr;
    align-items: center;
    gap: 10px;
    padding: 1px 0;
}

.cb {
    width: 12px;
    height: 12px;
    background: #6b5bd3;
    border-radius: 3px;
    position: relative;
    box-shadow: inset 0 -2px 0 rgba(0, 0, 0, 0.18);
}

.cb::after {
    content: "";
    position: absolute;
    left: 3px;
    top: 1px;
    width: 3px;
    height: 6px;
    border-right: 2px solid #fff;
    border-bottom: 2px solid #fff;
    transform: rotate(38deg);
}

.cn {
    font-weight: 800;
}

.dash {
    color: rgba(61, 52, 43, 0.6);
    font-weight: 900;
}

.mono {
    font-family: ui-monospace, Menlo, Consolas, "Courier New", monospace;
    font-size: 12px;
    letter-spacing: 0.1px;
}

.divider {
    margin-top: 12px;
    height: 2px;
    background: rgba(61, 52, 43, 0.55);
}

.prompt {
    margin-top: 10px;
    line-height: 1.45;
}

.gt {
    color: #3d342b;
    font-weight: 900;
}

.pick {
    color: #c59664;
    font-weight: 900;
}

.ok {
    color: #2f8f4e;
    font-weight: 900;
}

.ok-strong {
    color: #1f7a3f;
    font-weight: 900;
}

/* Execution å³ä¾§ */
.block {
    margin-top: 0px;
}

.amber {
    color: #c59664;
    font-weight: 900;
}

.chg {
    font-weight: 900;
    line-height: 1.38;
    margin: 2px 0;
}

.minus {
    color: #b04a46;
}

.plus {
    color: #2f8f4e;
}

.tok {
    font-weight: 900;
}

.tok.red {
    color: #b04a46;
}

.tok.green {
    color: #2f8f4e;
}

.okline {
    margin-top: 2px;
    color: #2f8f4e;
    font-weight: 900;
}
@media (max-width: 1279px) {
    .tui {
        overflow: auto;
        /* æ‰‹æœºè¦èƒ½ä¸Šä¸‹æ»šï¼Œå¦åˆ™å†…å®¹æŒ¤å‹ */
    }
    .slogan-text {
        margin-top: 20px;
    }
    .horse {
        margin-top: 20px;
    }
    .stage.mobile {
        position: relative;
        left: auto;
        top: auto;
        transform: none !important;
        width: 100%;
        height: auto;
        padding-top: 10px;
        padding-bottom: 10px;
    }

    /* æ ‡é¢˜å’Œé¡¶éƒ¨ä¿¡æ¯åœ¨æ‰‹æœºä¸Šé€‚å½“ç¼©å°å­—è·ã€å¢å¤§å¯è¯»æ€§ */
    .pixel-title {
        font-size: 44px;
        letter-spacing: 6px;
    }

    .intro {
        padding: 0 10px;
        gap: 12px;
    }

    .intro-text {
        font-size: 16px;
        line-height: 1.25;
    }

    /* å…³é”®ï¼šPlan / Execution æ”¹æˆä¸Šä¸‹æ’ï¼Œä¸”æ»¡å®½ */
    .panels {
        grid-template-columns: 1fr;
        padding: 0 10px;
        gap: 14px;
        margin-top: 12px;
    }

    .panel-body {
        padding: 10px 12px 12px 12px;
        font-size: 14px;
    }

    /* è¡Œå†…å¸ƒå±€æ”¶çª„ï¼Œä»£ç å…è®¸æ–­è¡Œ */
    .row {
        grid-template-columns: 18px 96px 14px 1fr;
        gap: 8px;
        align-items: start;
    }

    .mono {
        font-size: 13px;
        overflow-wrap: anywhere;
        word-break: break-word;
    }
}

</style>